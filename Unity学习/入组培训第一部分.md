## 关联Visual Studio
![[Pasted image 20231019232941.png]]

## 界面介绍
+ Windows -> Layouts -> 选择布局或保存自己的布局
![[Pasted image 20231019230739.png]]
+ 建议布局
![[Pasted image 20231019230813.png]]

## 资源导入
1. Unity资源商店
+ Windows -> Asset Store
![[Pasted image 20231019230324.png]]
2. 导入资源
+ Windows -> Package Manager
![[Pasted image 20231019230411.png]]
+ 选择My Assets -> download -> import
![[Pasted image 20231019230546.png]]

## 创建物体
1. 直接拖动资源文件到Scene窗口，要将Pixels Per Unit选为合适的大小（建议16）
![[Pasted image 20231019231256.png]]
2. 创建2D图形后将资源拖动到Sprite Renderer

## 瓦片地图
1. 右键创建TileMap
![[Pasted image 20231019231645.png]]
2. Windows -> Tile Palette创建Tile画板，将地图资源拖动到其中
![[Pasted image 20231019231752.png]]

## 基本组件介绍
1. Transform：位置，旋转，缩放
![[Pasted image 20231019232057.png]]
2. Rigidbody：刚体组件 可以为对象添加 [NVIDIA PhysX](https://baike.baidu.com/item/NVIDIA%20PhysX/3246347?fr=aladdin "NVIDIA PhysX")物理引擎，可以模拟真实的物理行为，如重力，摩擦力，速度等
![[Pasted image 20231019232142.png]]
3. Collider：让游戏对象能够实现碰撞的效果，用于做碰撞检测或触发检测
+ Use By Composite：碰撞体复合
![[Pasted image 20231019232416.png]]
4. Animator：动画控制器
![[Pasted image 20231019232537.png]]

## 人物控制脚本
1. 创建**PlayerController**的人物控制脚本
2. 拖动到了人物身上

### 命名法与访问权限
#### 命名法
小驼峰命名法又称驼峰式命名法，是一种常见的命名方式。它的命名规则是：除了第一个单词外，其他单词的首字母大写。例如，helloWorld、helloPhp、myNameIsJohnDoe等

#### 访问权限
+ public：公有的，其他类能自由访问并且Unity内能直接操作的
+ protected：保护的，同一类和子类能访问
+ private：只有在同一类能访问

### 人物基础控制
```csharp
//基础定义
//在脚本控制栏中显示移动控制这个集合
[Header("移动控制")]
//移动速度
public float speed; 
//跳跃高度
public float jumpForce; 
//人物操作控件
private Rigidbody2D rb; 

private float dirX; 

void Start()
{
	rb = GetComponent<Rigidbody2D>();
}

public void Move()
{
	//获取移动方向，diX的值为-1、0、1
	dirX = Input.GetAxisRaw("Horizontal");

	//人物左右移动
	rb.velocity = new Vector2(dirX * speed, rb.velocity.y);
	
	if(Input.GetKeyDown(KeyCode.Space))
	{
		//人物跳跃
		rb.velocity = new Vector2(rb.velocity.x, jumpForce);
	}
}
```

## 动画操作
### 窗口建立
![[Pasted image 20231019233148.png]]

### **Animator**设置
1. 使用**Int**类型实现动画状态转换(Idle为0，Run为1，Jump为2，Fall为3)
![[Pasted image 20231017123500.png]]
2. **Condition**使用Equal转换到目标的动画状态（如图从**Idle**转换到**Run**，是从0转换到1）
![[Pasted image 20231017123828.png]]
3. 代码控制
```csharp
//动画
//设置移动状态的枚举类型
private enum MoveState { idle, run, jump, fall };
private Animator anim;
//获取精灵渲染器组件，可以控制人物朝向
private SpriteRenderer sprite;

void Start()
{
	anim = GetComponent<Animator>();
	sprite = GetComponent<SpriteRenderer>();
}

public void UpdateAnimation()
{
	//声明一个MoveState枚举类型的变量
	MoveState state;
	if(dirX > 0)
	{
		//把状态设置为跑动
		state = MoveState.run;
		//不反转朝向
		sprite.flipX = false;
	}
	else if(dirX < 0)
	{
		state = MoveState.run;
		//反转朝向
		sprite.flipX = true;
	}
	else
	{
		//静止时把状态设置为待机
		state = MoveState.idle;
	}

	if(rb.velocity.y > .1f)
	{
		//设置状态为跳跃
		state = MoveState.jump;
	}
	else if(rb.velocity.y < -.1f)
	{
		//设置状态为下落
		state = MoveState.fall;
	}
	
	//设置动画器状态为当前类型
	anim.SetInteger("state", (int)state);
}
```